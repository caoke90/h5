define("index",{"linkArr":["../static/mint-ui.css"],"srcArr":["../static/zepto.min.js","../static/vue.js","../static/mint-ui.js"],"styleStr":"\n    body,div.index ,p{\n      margin: 0;padding: 0;\n    }\n    .index body{\n\n      background: #f2f2f2;\n    }\n    .index #app{\n      display: flex;\n      justify-content:space-between;\n    }\n    .index .del{\n      position: absolute;\n      width: 100px;\n      left: 340px;\n      top:0;\n      z-index: 1000;\n    }\n    .index .left{\n      position: relative;\n      width: 375px;\n    }\n    .index .main{\n      width: 375px;\n      height: 100vh;\n      background: #fff;\n      /*overflow-x: visible;*/\n      /*overflow-y: scroll;*/\n      position: relative;\n    }\n    .index .right{\n      width: 320px;\n    }\n    .index .right .mint-field-core{\n      color: #0bb20c;\n    }\n    .right .mint-field-core:.index :placeholder{\n      color: #0bb20c;\n      opacity: 0.4;\n    }\n    .index .right .objItem{\n      padding-left: 20px;\n    }\n    .index .right .objArr{\n      display: flex;\n    }\n    .index .right .arrIndex{\n      width: 20px;\n      line-height: 50px;\n\n    }\n    .index .right .objArrItem{\n      flex:1;\n    }\n    .index .right .mint-cell-value a{\n      cursor: pointer;\n      color: #26a2ff;\n    }\n    .index .left .itemCard{\n      position: relative;\n    }\n    .index .left .numCard{\n      background: #fff;\n      width: 24px;\n      height: 24px;\n      border-radius: 50%;\n      border: 1px solid #ddd;\n      line-height: 24px;\n      text-align: center;\n      position: absolute;\n      left: 0px;\n      top:0;\n      z-index: 2;\n    }\n    .index .main .itemCard{\n      position: relative;\n\n    }\n    .index .main .numCard{\n      background: #fff;\n      width: 24px;\n      height: 24px;\n      border-radius: 50%;\n      border: 1px solid #ddd;\n      line-height: 24px;\n      text-align: center;\n      position: absolute;\n      right: -30px;\n      top:0;\n      z-index: 2;\n    }\n  ","scriptStr":"\n  var data=__cardData\n  bus=$(window)\n  bus.curCardData=null;\n  bus.contain=\"\";\n  bus.index=0;\n\n  bus.editCardData=null\n  bus.editcontain=\"\";\n\n  Vue.component('card', {\n    template: '<div class=\"itemCard\" v-on:click=\"mouseenter\" @touchstart=\"mousedown\" @touchend=\"mouseup\" @mousedown=\"mousedown\" @mouseup=\"mouseup\" draggable=\"true\"><div class=\"numCard\">{{k}}</div></div>',\n    props:[\"userData\",\"contain\",\"k\"],\n    data:function () {\n      return {\n      };\n    },\n    methods:{\n      mouseenter:function (e) {\n        if(this.contain==\"mainChild\"){\n          bus.editCardData=this.userData\n          bus.editcontain=this.contain\n          bus.trigger(\"edit\")\n        }\n      },\n      mousedown:function (e) {\n        bus.curCardData=this.userData\n        bus.contain=this.contain\n        if(bus.curCardData.isPendant){\n          bus.e=e;\n        }\n      },\n      mouseup:function (e) {\n        if(bus.curCardData){\n          var curCardData=bus.curCardData\n          //挂件移动\n          if(curCardData.isPendant){\n            return;\n          }\n          bus.curCardData=null\n          //移动\n          if(bus.contain==\"mainChild\"&&this.contain==\"mainChild\"){\n            var curIndex=this.$parent.mainChild.indexOf(this.userData)\n            var preIndex=this.$parent.mainChild.indexOf(curCardData)\n            //交换\n            if(preIndex-curIndex==1){\n              this.$parent.mainChild.splice(curIndex,1)\n              this.$parent.mainChild.splice(curIndex+1,0,this.userData)\n            }else if(preIndex!=curIndex){\n              //移动\n              this.$parent.mainChild.splice(preIndex,1)\n              curIndex=this.$parent.mainChild.indexOf(this.userData)\n              this.$parent.mainChild.splice(curIndex+1,0,curCardData)\n            }\n          }\n          if(bus.contain==\"children\"&&this.contain==\"mainChild\"){//插入\n            var curIndex=this.$parent.mainChild.indexOf(this.userData)\n            var preIndex=this.$parent.mainChild.indexOf(curCardData)\n            var obj=JSON.parse(JSON.stringify(curCardData))\n            obj.cardId=obj.cardName+(bus.index++)\n            console.log(obj.cardId)\n            this.$parent.mainChild.splice(curIndex+1,0,obj)\n          }\n        }\n      }\n    },\n    mounted:function () {\n      var obj=this.userData\n      if(!obj.styleObj){\n        obj.isPendant=false;\n        obj.styleObj={}\n      }\n      var data=JSON.parse(JSON.stringify(obj))\n      delete data.cssText\n      render([data],this.$el,function () {\n        //获取card的默认数据\n        if(!obj.cardData){\n          obj.cardData=JSON.parse(JSON.stringify(define(obj.cardName).cardData))\n        }\n      })\n    }\n\n  })\n\n  var app=new Vue({\n    el:\"#__cardId #app\",\n    data:{\n      selected:\"e1\",////右边\n      selected2:\"l0\",//左边\n      selected3:\"\",//右边\n      childrenList:[],\n      mainChild:[],\n      editCardData:bus.editCardData\n    },\n    methods:{\n      //卡片拖到中间\n      mouseup:function (e) {\n\n        if(bus.curCardData){\n          var curCardData=bus.curCardData\n          bus.curCardData=null\n\n          if(bus.contain==\"mainChild\"&&curCardData.isPendant){\n            var dx=e.x-bus.e.x\n            var dy=e.y-bus.e.y\n            curCardData.styleObj.left=parseInt(curCardData.styleObj.left)+dx+\"px\"\n            curCardData.styleObj.top=parseInt(curCardData.styleObj.top)+dy+\"px\"\n            return\n          }\n          var preIndex=this.mainChild.indexOf(curCardData)\n          //添加新的卡片\n          if(bus.contain==\"children\"){\n            var obj=JSON.parse(JSON.stringify(curCardData))\n            console.log(obj)\n            obj.cardId=obj.cardName+(bus.index++)\n            if(obj.isPendant){\n\n              obj.styleObj={\n                position:\"absolute\",\n                top:\"0px\",\n                left:\"0px\",\n                width:\"100%\",\n                height:\"auto\",\n                \"z-index\":\"1\",\n              }\n            }\n\n            this.mainChild.push(obj)\n          }\n          if(bus.contain==\"mainChild\"&&preIndex!=this.mainChild.length-1){\n            this.mainChild.splice(preIndex,1)\n            this.mainChild.push(curCardData)\n          }\n        }\n      },\n      //点击删除\n      del:function () {\n        var the=this\n        the.mainChild.splice(the.mainChild.indexOf(the.editCardData),1)\n        the.editCardData=null\n      },\n      //点击预览\n      show:function () {\n        window.open(\"demo.html\")\n      },\n      //点击保存\n      save:function () {\n        var obj=JSON.parse(JSON.stringify(this.mainChild))\n        var time=new Date().getTime().toString().substr(5,8)\n        obj.map(function (item,k) {\n          item.cardId=\"t\"+time+k\n          if(item.isPendant){\n            var cssText=\"\";\n            for(var k in item.styleObj){\n              cssText=cssText+k+\":\"+item.styleObj[k]+\";\";\n            }\n            item.cssText=cssText;\n          }\n          delete item.isPendant;\n          delete item.styleObj;\n          return item\n        })\n        console.log(obj)\n        localStorage.setItem(\"curCardData\",JSON.stringify(obj))\n        this.$toast({\n          message: '已保存！'\n        })\n      },\n      //右边编辑变化\n      changev:function (v,k,k2,k3) {\n        var obj=this.editCardData;\n        obj.cardId=obj.cardName+(bus.index++);\n        if(arguments.length==2){\n          obj.cardData[k]=v;\n        }else if(arguments.length==3){\n          obj.cardData[k][k2]=v;\n        }else if(arguments.length==4){\n          obj.cardData[k][k2][k3]=v;\n        }\n      },\n      //删除一个数组\n      delv:function (k,k2) {\n        var obj=this.editCardData;\n        obj.cardId=obj.cardName+(bus.index++)\n        if(arguments.length==2){\n          obj.cardData[k].splice(k2,1)\n        }\n        if(arguments.length==1){\n          obj.cardData.splice(k,1)\n        }\n      },\n      //添加一个\n      addv:function (k) {\n        var obj=this.editCardData;\n\n        if(arguments.length==1){\n          var arr=define(obj.cardName).cardData[k]\n          if(arr[0]&&typeof arr[0]==\"object\"){\n            var item={}\n            for(var k3 in arr[0]){\n              item[k3]=\"\"\n            }\n            obj.cardData[k].push(item)\n          }else{\n            obj.cardData[k].push(\"\")\n          }\n        }\n        if(arguments.length==0){\n          var arr=define(obj.cardName).cardData\n          if(arr[0]&&typeof arr[0]==\"object\"){\n            var item={}\n            for(var k3 in arr[0]){\n              item[k3]=\"\"\n            }\n            obj.cardData.push(item)\n          }else{\n            obj.cardData.push(\"\")\n          }\n        }\n      },\n      changev2:function (v,k) {\n        var obj=this.editCardData\n        obj.styleObj[k]=v;\n        obj.cardId=obj.cardName+(bus.index++)\n      },\n      //挂件改变\n      isPendantchange:function () {\n        var obj=this.editCardData\n        if(obj.isPendant){\n          if(JSON.stringify(obj.styleObj)==\"{}\"){\n            obj.styleObj={\n              position:\"absolute\",\n              top:\"0px\",\n              left:\"0px\",\n              width:\"100%\",\n              height:\"auto\",\n              \"z-index\":\"1\",\n            }\n          }\n          obj.styleObj.position=\"absolute\"\n        }else{\n          obj.styleObj.position=\"static\"\n        }\n        obj.cardId=obj.cardName+(bus.index++)\n      }\n    },\n    mounted:function () {\n      var the=this\n      bus.on(\"edit\",function (el) {\n        the.selected3=\"\";\n        the.editCardData=bus.editCardData\n        bus.editCardData=null\n        var id=the.editCardData.cardId\n        var po=$(\"#__cardId #\"+id).offset()\n        if(po){\n          $(\"#__cardId .del\").css({\n            top:(po.top)+\"px\"\n          })\n        }\n      })\n    },\n  })\n\n  var datastr=localStorage.getItem(\"curCardData\")||\"[]\"\n  app.mainChild=JSON.parse(datastr).map(function (item) {\n    if(item.cssText){\n      item.isPendant=true;\n      item.styleObj={}\n      console.log(item.cssText)\n      item.cssText.replace(/([\\w-]+):([\\d\\D]*?);/g,function (m,p1,p2) {\n        item.styleObj[p1]=p2;\n      })\n    }\n    return item\n  })\n\n  app.childrenList=[\n    {\n      \"title\":\"运营卡片7种\",\n      \"children\":[\n        {\n          \"cardName\":\"card7\"\n        },\n        {\n          \"cardName\":\"card4\"\n        },\n        {\n          \"cardName\":\"card6\"\n        },\n        {\n          \"cardName\":\"card9\"\n        },\n        {\n          \"cardName\":\"card16\"\n        },{\n          \"cardName\":\"card19\"\n        }, {\n          \"cardName\":\"card22\"\n        },{\n          \"cardName\":\"card42\"\n        }\n\n      ]\n    },\n    {\n      \"title\":\"挂件卡片7种\",\n      \"children\":[\n        {\n          \"cardName\":\"card7\",\n          \"isPendant\":true\n        },\n        {\n          \"cardName\":\"card4\",\n          \"isPendant\":true\n        },\n        {\n          \"cardName\":\"card6\",\n          \"isPendant\":true\n        },\n        {\n          \"cardName\":\"card9\",\n          \"isPendant\":true\n        },\n        {\n          \"cardName\":\"card16\",\n          \"isPendant\":true\n        },{\n          \"cardName\":\"card19\",\n          \"isPendant\":true\n        }, {\n          \"cardName\":\"card22\",\n          \"isPendant\":true\n        },{\n          \"cardName\":\"card42\",\n          \"isPendant\":true\n        }\n\n      ]\n    },\n    {\n      \"title\":\"marvelAll48种\",\n      \"children\":[\n        {\n          \"cardName\":\"card2\"\n        },\n        {\n          \"cardName\":\"card3\"\n        },\n        {\n          \"cardName\":\"card4\"\n        },\n        {\n          \"cardName\":\"card6\"\n        },\n        {\n          \"cardName\":\"card7\"\n        },\n        {\n          \"cardName\":\"card9\"\n        },\n        {\n          \"cardName\":\"card11\"\n        },\n        {\n          \"cardName\":\"card16\"\n        },\n        {\n          \"cardName\":\"card17\"\n        },\n        {\n          \"cardName\":\"card19\"\n        },\n        {\n          \"cardName\":\"card21\"\n        },\n        {\n          \"cardName\":\"card22\"\n        },\n        {\n          \"cardName\":\"card23\"\n        },\n        {\n          \"cardName\":\"card24\"\n        },\n        {\n          \"cardName\":\"card25\"\n        },\n        {\n          \"cardName\":\"card26\"\n        },\n        {\n          \"cardName\":\"card27\"\n        },\n        {\n          \"cardName\":\"card28\"\n        },\n        {\n          \"cardName\":\"card29\"\n        },\n        {\n          \"cardName\":\"card30\"\n        },\n        {\n          \"cardName\":\"card31\"\n        },\n        {\n          \"cardName\":\"card32\"\n        },\n        {\n          \"cardName\":\"card35\"\n        },\n        {\n          \"cardName\":\"card36\"\n        },\n        {\n          \"cardName\":\"card38\"\n        },\n        {\n          \"cardName\":\"card39\"\n        },\n        {\n          \"cardName\":\"card40\"\n        },\n        {\n          \"cardName\":\"card41\"\n        },\n        {\n          \"cardName\":\"card42\"\n        },\n        {\n          \"cardName\":\"card43\"\n        },\n        {\n          \"cardName\":\"card50\"\n        },\n        {\n          \"cardName\":\"card52\"\n        },\n        {\n          \"cardName\":\"card53\"\n        },\n        {\n          \"cardName\":\"card54\"\n        },\n        {\n          \"cardName\":\"card55\"\n        },\n        {\n          \"cardName\":\"card57\"\n        },\n        {\n          \"cardName\":\"card58\"\n        },\n        {\n          \"cardName\":\"card59\"\n        },\n        {\n          \"cardName\":\"card77\"\n        },\n        {\n          \"cardName\":\"card82\"\n        },\n        {\n          \"cardName\":\"card83\"\n        },\n        {\n          \"cardName\":\"card83-85\"\n        },\n        {\n          \"cardName\":\"card84\"\n        },\n        {\n          \"cardName\":\"card86\"\n        },\n        {\n          \"cardName\":\"card87\"\n        },\n        {\n          \"cardName\":\"card88\"\n        },\n        {\n          \"cardName\":\"card93\"\n        },\n        {\n          \"cardName\":\"card2001\"\n        }\n      ]\n    }\n\n  ].map(function (item) {\n    item.children.map(function (v) {\n      if(!v.cardId){\n        v.cardId=v.cardName+(bus.index++)\n      }\n      return v\n    })\n    return item\n  });\n\n//  $.getJSON(\"leftData.json\",function (data) {\n//    app.childrenList=data.map(function (item) {\n//      item.children.map(function (v) {\n//        if(!v.cardId){\n//          v.cardId=v.cardName+(bus.index++)\n//        }\n//        return v\n//      })\n//      return item\n//    });\n//    console.log(app.childrenList)\n//  })\n\n","cardData":{},"html":"<!doctype html>\n<html>\n<head>\n  \n  <title>卡片制作器</title>\n  \n  \n  \n  \n  \n  \n</head>\n<body>\n<div id=\"app\">\n  <div class=\"left\" id=\"left\">\n      <div style=\"position: fixed;width: 375px;\">\n        <mt-navbar v-model=\"selected2\">\n          <mt-tab-item v-for=\"(v,k) in childrenList\" :id=\"'l'+k\" :key=\"'l'+k\">{{v.title}}</mt-tab-item>\n        </mt-navbar>\n        <mt-tab-container style=\"overflow-y: scroll;height:90vh;\" v-model=\"selected2\">\n          <mt-tab-container-item v-for=\"(item,k) in childrenList\" :id=\"'l'+k\" :key=\"'l'+k\">\n            <div v-for=\"(v,k) in item.children\" :key=\"v.cardId\">\n              <card v-bind:user-data=\"v\" :k=\"k\" contain=\"children\"></card>\n            </div>\n          </mt-tab-container-item>\n        </mt-tab-container>\n      </div>\n  </div>\n  <div style=\"position: relative;\" id=\"main\"  v-on:mouseup=\"mouseup()\">\n    <div class=\"del\" v-show=\"editCardData\">\n      <mt-button style=\"margin-left: 10px;\" type=\"danger\" size=\"small\" v-on:click=\"del\"><-删除</mt-button>\n    </div>\n    <div class=\"main\" @mouseup=\"mouseup\" @touchend=\"mouseup\">\n      <div v-for=\"(v,k) in mainChild\" :key=\"v.cardId\">\n        <card v-bind:user-data=\"v\" :style=\"v.styleObj\" :k=\"k\" contain=\"mainChild\"></card>\n      </div>\n    </div>\n  </div>\n  <div class=\"right\" id=\"right\">\n    <div style=\"position:fixed;width: 320px;z-index: 100;height: 100vh;overflow-y: scroll;\">\n      <div style=\"margin-bottom: 10px;\">\n        <mt-button size=\"small\" style=\"cursor: pointer\" v-on:click=\"show\">预览</mt-button>\n        <mt-button size=\"small\" style=\"cursor: pointer\" v-on:click=\"save\">保存</mt-button>\n      </div>\n      <div v-if=\"editCardData\">\n        <mt-navbar v-model=\"selected\">\n          <mt-tab-item id=\"e1\">数据</mt-tab-item>\n          <mt-tab-item id=\"e2\">卡片信息</mt-tab-item>\n        </mt-navbar>\n        <mt-tab-container v-model=\"selected\">\n          <mt-tab-container-item id=\"e1\">\n            <mt-cell\n              title=\"是否挂件\">\n              <mt-switch v-model=\"editCardData.isPendant\" v-on:change=\"isPendantchange()\"></mt-switch>\n            </mt-cell>\n            <div v-if=\"editCardData.isPendant\" style=\"padding:5px 10px;\">\n              <div v-for=\"(v,k) in editCardData.styleObj\">\n                <mt-field :label=\"k+':'\" placeholder=\"请输入\" v-on:change=\"changev2($event,k)\" :value=\"v\"></mt-field>\n              </div>\n            </div>\n            <div v-if=\"Object.prototype.toString.call(editCardData.cardData)=='[object Object]'\">\n              <div v-for=\"(v,k) in editCardData.cardData\" >\n                <div v-if=\"Object.prototype.toString.call(v)=='[object Object]'\">\n                  <div v-on:click=\"selected3==k?selected3='':selected3=k\">\n                    <mt-cell :title=\"k+':'\">\n                      <a v-if=\"selected3!=k\">{…}</a>\n                      <a v-else>-</a>\n                    </mt-cell>\n                  </div>\n                  <div v-show=\"selected3==k\">\n                    <div>{</div>\n                    <div v-for=\"(v2,k2) in v\" class=\"objItem\">\n                      <mt-field v-on:change=\"changev($event,k,k2)\" :label=\"k2+':'\" placeholder=\"请输入\" :value=\"v2\"></mt-field>\n                    </div>\n                    <div>}</div>\n                  </div>\n                </div>\n                <div v-else-if=\"Object.prototype.toString.call(v)=='[object Array]'\">\n                  <div v-if=\"v[0]&&Object.prototype.toString.call(v[0])=='[object Object]'\" v-on:click=\"selected3==k?selected3='':selected3=k\">\n                    <mt-cell :title=\"k+':'\">\n                      <a v-if=\"selected3!=k\">{{'['+'{…},'.repeat(v.length).replace(/,$/,'')+v.length+']'}}</a>\n                      <a v-else>-</a>\n                    </mt-cell>\n                  </div>\n                  <div v-else v-on:click=\"selected3==k?selected3='':selected3=k\">\n                    <mt-cell :title=\"k+':'\">\n                      <a v-if=\"selected3!=k\">{{'[…'+v.length+']'}}</a>\n                      <a v-else>-</a>\n                    </mt-cell>\n                  </div>\n                  <div v-show=\"selected3==k\">\n                    <div v-for=\"(v2,k2) in v\" class=\"objArr\">\n                      <div class=\"arrIndex\">{{k2}}</div>\n                      <div class=\"objArrItem\" v-if=\"Object.prototype.toString.call(v2)=='[object Object]'\">\n                        <mt-field v-for=\"(v3,k3) in v2\" v-on:change=\"changev($event,k,k2,k3)\" placeholder=\"请输入\" :label=\"k3+':'\" :value=\"v3\"></mt-field>\n                      </div>\n                      <div class=\"objArrItem\" v-else>\n                        <mt-field placeholder=\"请输入\" v-on:change=\"changev($event,k,k2)\" :value=\"v2\"></mt-field>\n                      </div>\n                      <div><mt-button size=\"small\" style=\"cursor: pointer\" v-on:click=\"delv(k,k2)\">删除</mt-button></div>\n                    </div>\n                    <div><mt-button size=\"small\" style=\"cursor: pointer\" v-on:click=\"addv(k)\">添加</mt-button></div>\n                  </div>\n                </div>\n                <div v-else >\n                  <mt-field :label=\"k+':'\" placeholder=\"请输入\" v-on:change=\"changev($event,k)\" :value=\"v\"></mt-field>\n                </div>\n              </div>\n            </div>\n            <div v-else-if=\"Object.prototype.toString.call(editCardData.cardData)=='[object Array]'\">\n              <div v-for=\"(v,k) in editCardData.cardData\" class=\"objArr\">\n                <div class=\"arrIndex\">{{k}}</div>\n                <div class=\"objArrItem\" v-if=\"Object.prototype.toString.call(v)=='[object Object]'\">\n                  <mt-field v-for=\"(v2,k2) in v\" v-on:change=\"changev($event,k,k2)\" placeholder=\"请输入\" :label=\"k2+':'\" :value=\"v2\"></mt-field>\n                </div>\n                <div class=\"objArrItem\" v-else>\n                  <mt-field placeholder=\"请输入\" v-on:change=\"changev($event,k)\" :value=\"v\"></mt-field>\n                </div>\n                <div><mt-button size=\"small\" style=\"cursor: pointer\" v-on:click=\"delv(k)\">删除</mt-button></div>\n              </div>\n              <div><mt-button size=\"small\" style=\"cursor: pointer\" v-on:click=\"addv()\">添加</mt-button></div>\n            </div>\n            <div v-else></div>\n          </mt-tab-container-item>\n          <mt-tab-container-item id=\"e2\">\n            <mt-cell\n              title=\"id\"\n              :value=\"editCardData.cardId\">\n            </mt-cell>\n            <mt-cell\n              title=\"卡片类型\"\n              :value=\"editCardData.cardName\">\n            </mt-cell>\n          </mt-tab-container-item>\n        </mt-tab-container>\n      </div>\n    </div>\n  </div>\n</div>\n</body>\n</html>\n"});